# Maintainer: Inkane <neoinkaneglade@aol.com>
# Contributor: Umidjon Almasov <u.almasov@gmail.com>
# Contributer: Allan McRae <allan@archlinux.org>

pkgname=glpng
pkgver=1.45
pkgrel=6
pkgdesc="Toolkit for loading PNG images as OpenGL textures"
arch=('i686' 'x86_64')
url="http://www.fifi.org/doc/libglpng-dev/glpng.html"
license=('custom')
depends=('libpng' 'libgl')
makedepends=('mesa')
source=(http://ftp.de.debian.org/debian/pool/main/libg/libglpng/libglpng_${pkgver}.orig.tar.gz
        Makefile
        libpng15.patch
        license)

md5sums=('9e0daad8e39fbf3179c73c0d3f74f104'
         '0b24e9cb527d4ed1c43dd743d49d2b54'
         'f3f0c0a3f867c5856d922c18677ef2a2'
         'cd066652a6e5dbd7c1fc303b8e03417a')

build() {
  cd "$srcdir/libglpng-1.45.orig"

  patch -Np1 -i "$srcdir/libpng15.patch"

  cp "$srcdir/Makefile" .
  make libglpng.so.1.45
}

package() {
  cd "$srcdir/libglpng-1.45.orig"
  make DESTDIR="$pkgdir/usr" install
  install -Dm644 "$srcdir/license" \
    "$pkgdir/usr/share/licenses/glpng/license"
}
